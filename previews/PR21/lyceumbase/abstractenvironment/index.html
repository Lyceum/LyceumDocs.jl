<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>AbstractEnvironment · Lyceum</title><link rel="canonical" href="https://docs.lyceum.ml/dev/lyceumbase/abstractenvironment/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Lyceum logo"/></a><div class="docs-package-name"><span class="docs-autofit">Lyceum</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">LyceumBase</span><ul><li class="is-active"><a class="tocitem" href>AbstractEnvironment</a><ul class="internal"><li><a class="tocitem" href="#Overview-1"><span>Overview</span></a></li><li><a class="tocitem" href="#API-1"><span>API</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/example_howto/">Running Examples Locally</a></li><li><a class="tocitem" href="../../examples/humanoid/">Creating a MuJoCo Environment</a></li><li><a class="tocitem" href="../../examples/NPG/">Learning a Control Policy</a></li><li><a class="tocitem" href="../../examples/visualize/">Using the Visualizer</a></li></ul></li><li><span class="tocitem">LyceumAI</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lyceumai/models/policies/">Policies</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Algorithms</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lyceumai/algorithms/naturalpolicygradient/">Natural Policy Gradient</a></li><li><a class="tocitem" href="../../lyceumai/algorithms/mppi/">MPPI</a></li></ul></li></ul></li><li><span class="tocitem">LyceumMuJoCo</span><ul><li><a class="tocitem" href="../../lyceummujoco/lyceummujoco/">LyceumMuJoCo</a></li><li><a class="tocitem" href="../../lyceummujoco/environments/">Environments</a></li></ul></li><li><span class="tocitem">LyceumMuJoCoViz</span><ul><li><a class="tocitem" href="../../lyceummujocoviz/lyceummujocoviz/">LyceumMuJoCoViz</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">LyceumBase</a></li><li class="is-active"><a href>AbstractEnvironment</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>AbstractEnvironment</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="AbstractEnvironment-1"><a class="docs-heading-anchor" href="#AbstractEnvironment-1">AbstractEnvironment</a><a class="docs-heading-anchor-permalink" href="#AbstractEnvironment-1" title="Permalink"></a></h1><h2 id="Overview-1"><a class="docs-heading-anchor" href="#Overview-1">Overview</a><a class="docs-heading-anchor-permalink" href="#Overview-1" title="Permalink"></a></h2><p>What follows is the <code>AbstractEnvironment</code> interface in its entirety. For users implementing new environments, only a subset of the methods discussed below are required. The remaining methods are built off of that subset and should not be implemented directly. Some of the required methods may have defaults.</p><p><strong>Required Methods</strong></p><ul><li><p>State</p><ul><li><code>statespace(env)</code></li><li><code>getstate!(state, env)</code></li><li><code>setstate!(env, state)</code></li></ul></li><li><p>Observation</p><ul><li><code>obsspace(env)</code></li><li><code>getobs!(obs, env)</code></li></ul></li><li><p>Action</p><ul><li><code>actionspace(env)</code></li><li><code>getaction!(action, env)</code></li><li><code>setaction!(env, action)</code></li></ul></li><li><p>Reward</p><ul><li><code>rewardspace(env)</code></li><li><code>getreward(env)</code></li></ul></li><li><p>Evaluation</p><ul><li><code>evalspace(env)</code></li><li><code>geteval(env)</code></li></ul></li><li><p>Simulation</p><ul><li><code>reset!(env)</code></li><li><code>randreset!(env)</code></li><li><code>step!(env)</code></li><li><code>isdone(env)</code></li><li><code>timestep(env)</code></li><li><code>Base.time(env)</code></li></ul></li></ul><h2 id="API-1"><a class="docs-heading-anchor" href="#API-1">API</a><a class="docs-heading-anchor-permalink" href="#API-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.AbstractEnvironment" href="#LyceumBase.AbstractEnvironment"><code>LyceumBase.AbstractEnvironment</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractEnvironment</code></pre><p>Supertype for all environments.</p></div></section></article><h3 id="State-1"><a class="docs-heading-anchor" href="#State-1">State</a><a class="docs-heading-anchor-permalink" href="#State-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.statespace" href="#LyceumBase.statespace"><code>LyceumBase.statespace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">statespace(sim::MJSim) -&gt; Any
</code></pre><p>Return a description of <code>sim</code>&#39;s statespace.</p></div></section><section><div><pre><code class="language-none">statespace(env::AbstractEnvironment) --&gt; Shapes.AbstractShape</code></pre><p>Returns a subtype of <code>Shapes.AbstractShape</code> describing the state space of <code>env</code>.</p><p>See also: <a href="#LyceumBase.getstate!"><code>getstate!</code></a>, <a href="#LyceumBase.setstate!"><code>setstate!</code></a>, <a href="#LyceumBase.getstate"><code>getstate</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getstate!" href="#LyceumBase.getstate!"><code>LyceumBase.getstate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getstate!(state, sim)
</code></pre><p>Copy the following state fields from <code>sim.d</code> into <code>state</code>:</p><pre><code class="language-none">(time, qpos, qvel, act, mocap_pos, mocap_quat, userdata, qacc_warmstart)</code></pre></div></section><section><div><pre><code class="language-none">getstate!(state, env::AbstractEnvironment)</code></pre><p>Store the current state of <code>env</code> in <code>state</code>, where <code>state</code> conforms to the state space returned by <code>statespace(env)</code>.</p><p>See also: <a href="#LyceumBase.statespace"><code>statespace</code></a>, <a href="#LyceumBase.setstate!"><code>setstate!</code></a>, <a href="#LyceumBase.getstate"><code>getstate</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.setstate!" href="#LyceumBase.setstate!"><code>LyceumBase.setstate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">setstate!(sim, state)
</code></pre><p>Copy the components of <code>state</code> to their respective fields in <code>sim.d</code>, namely:</p><pre><code class="language-none">(time, qpos, qvel, act, mocap_pos, mocap_quat, userdata, qacc_warmstart)</code></pre></div></section><section><div><pre><code class="language-none">setstate!(env::AbstractEnvironment, state)</code></pre><p>Set the state of <code>env</code> to <code>state</code>, where <code>state</code> conforms to the state space returned by <code>statespace(env)</code>.</p><p>See also: <a href="#LyceumBase.statespace"><code>statespace</code></a>, <a href="#LyceumBase.getstate!"><code>getstate!</code></a>, <a href="#LyceumBase.getstate"><code>getstate</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes must guarantee that calls to other &quot;getter&quot; functions (e.g. <code>getreward</code>) after a call to <code>setstate!</code> reflect the new, passed-in state.</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getstate" href="#LyceumBase.getstate"><code>LyceumBase.getstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getstate(sim)
</code></pre><p>Return a flattened vector of the following state fields from <code>sim.d</code>:</p><pre><code class="language-none">(time, qpos, qvel, act, mocap_pos, mocap_quat, userdata, qacc_warmstart)</code></pre></div></section><section><div><pre><code class="language-none">getstate(env::AbstractEnvironment)</code></pre><p>Get the current state of <code>env</code>. The returned value will be an object conforming to the state space returned by <code>statespace(env)</code>.</p><p>See also: <a href="#LyceumBase.statespace"><code>statespace</code></a>, <a href="#LyceumBase.getstate!"><code>getstate!</code></a>, <a href="#LyceumBase.setstate!"><code>setstate!</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <a href="#LyceumBase.statespace"><code>statespace</code></a> and <a href="#LyceumBase.getstate!"><code>getstate!</code></a>, which are used internally by <code>getstate</code>.</p></div></div></div></section></article><h3 id="Observation-1"><a class="docs-heading-anchor" href="#Observation-1">Observation</a><a class="docs-heading-anchor-permalink" href="#Observation-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.obsspace" href="#LyceumBase.obsspace"><code>LyceumBase.obsspace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">obsspace(sim::MJSim) -&gt; Any
</code></pre><p>Return a description of <code>sim</code>&#39;s observation space.</p></div></section><section><div><pre><code class="language-none">obsspace(env::AbstractEnvironment) --&gt; Shapes.AbstractShape</code></pre><p>Returns a subtype of <code>Shapes.AbstractShape</code> describing the observation space of <code>env</code>.</p><p>See also: <a href="#LyceumBase.getobs!"><code>getobs!</code></a>, <a href="#LyceumBase.getobs"><code>getobs</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getobs!" href="#LyceumBase.getobs!"><code>LyceumBase.getobs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getobs!(obs, sim)
</code></pre><p>Copy <code>sim.d.sensordata</code> into <code>obs</code>.</p></div></section><section><div><pre><code class="language-none">getobs!(obs, env::AbstractEnvironment)</code></pre><p>Store the current observation of <code>env</code> in <code>obs</code>, where <code>obs</code> conforms to the observation space returned by <code>obsspace(env)</code>.</p><p>See also: <a href="#LyceumBase.obsspace"><code>obsspace</code></a>, <a href="#LyceumBase.getobs"><code>getobs</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getobs" href="#LyceumBase.getobs"><code>LyceumBase.getobs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getobs(sim::MJSim) -&gt; Any
</code></pre><p>Return a copy of <code>sim.d.sensordata</code>.</p></div></section><section><div><pre><code class="language-none">getobs(env::AbstractEnvironment)</code></pre><p>Get the current observation of <code>env</code>. The returned value will be an object conforming to the observation space returned by <code>obsspace(env)</code>.</p><p>See also: <a href="#LyceumBase.obsspace"><code>obsspace</code></a>, <a href="#LyceumBase.getobs!"><code>getobs!</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <a href="#LyceumBase.obsspace"><code>obsspace</code></a> and <a href="#LyceumBase.getobs!"><code>getobs!</code></a>, which are used internally by <code>getobs</code>.</p></div></div></div></section></article><h3 id="Action-1"><a class="docs-heading-anchor" href="#Action-1">Action</a><a class="docs-heading-anchor-permalink" href="#Action-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.actionspace" href="#LyceumBase.actionspace"><code>LyceumBase.actionspace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">actionspace(sim::MJSim) -&gt; Any
</code></pre><p>Return a description of <code>sim</code>&#39;s action space.</p></div></section><section><div><pre><code class="language-none">actionspace(env::AbstractEnvironment) --&gt; Shapes.AbstractShape</code></pre><p>Returns a subtype of <code>Shapes.AbstractShape</code> describing the action space of <code>env</code>.</p><p>See also: <a href="#LyceumBase.getaction!"><code>getaction!</code></a>, <a href="#LyceumBase.setaction!"><code>setaction!</code></a>, <a href="#LyceumBase.getaction"><code>getaction</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getaction!" href="#LyceumBase.getaction!"><code>LyceumBase.getaction!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getaction!(action, policy, feature)
</code></pre><p>Treating <code>policy</code> as a deterministic policy, compute the mean action of <code>policy</code>, conditioned on <code>feature</code>, and store it in <code>action</code>.</p></div></section><section><div><pre><code class="language-julia">getaction!(action, state, m; nthreads)
</code></pre><p>Starting from the environment&#39;s <code>state</code>, perform one step of the MPPI algorithm and store the resulting action in <code>action</code>. The trajectory sampling portion of MPPI is done in parallel using <code>nthreads</code> threads.</p></div></section><section><div><pre><code class="language-julia">getaction!(action::AbstractArray{#s12,1} where #s12&lt;:Real, sim::MJSim) -&gt; Any
</code></pre><p>Copy <code>sim.d.ctrl</code> into <code>action</code>.</p></div></section><section><div><pre><code class="language-none">getaction!(action, env::AbstractEnvironment)</code></pre><p>Store the current action of <code>env</code> in <code>action</code>, where <code>action</code> conforms to the action space returned by <code>actionspace(env)</code>.</p><p>See also: <a href="#LyceumBase.actionspace"><code>actionspace</code></a>, <a href="#LyceumBase.setaction!"><code>setaction!</code></a>, <a href="#LyceumBase.getaction"><code>getaction</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.setaction!" href="#LyceumBase.setaction!"><code>LyceumBase.setaction!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">setaction!(sim::MJSim, action::AbstractArray{#s12,1} where #s12&lt;:Real) -&gt; MJSim
</code></pre><p>Copy <code>action</code> into <code>sim.d.ctrl</code> into <code>action</code> and compute the new forward dynamics.</p></div></section><section><div><pre><code class="language-none">setaction!(env::AbstractEnvironment, action)</code></pre><p>Set the action of <code>env</code> to <code>action</code>, where <code>action</code> conforms to the action space returned by <code>actionspace(env)</code>.</p><p>See also: <a href="#LyceumBase.actionspace"><code>actionspace</code></a>, <a href="#LyceumBase.getaction!"><code>getaction!</code></a>, <a href="#LyceumBase.getaction"><code>getaction</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes must guarantee that calls to other &quot;getter&quot; functions (e.g. <code>getreward</code>) after a call to <code>setaction!</code> reflect the new, passed-in action.</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getaction" href="#LyceumBase.getaction"><code>LyceumBase.getaction</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getaction(sim::MJSim, action::AbstractArray{#s12,1} where #s12&lt;:Real) -&gt; Any
</code></pre><p>Return a copy of <code>sim.d.ctrl</code>.</p></div></section><section><div><pre><code class="language-none">getaction(env::AbstractEnvironment)</code></pre><p>Get the current action of <code>env</code>. The returned value will be an object conforming to the action space returned by <code>actionspace(env)</code>.</p><p>See also: <a href="#LyceumBase.actionspace"><code>actionspace</code></a>, <a href="#LyceumBase.getaction!"><code>getaction!</code></a>, <a href="#LyceumBase.setaction!"><code>setaction!</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <a href="#LyceumBase.actionspace"><code>actionspace</code></a> and <a href="#LyceumBase.getaction!"><code>getaction!</code></a>, which are used internally by <code>getaction</code>.</p></div></div></div></section></article><h3 id="Reward-1"><a class="docs-heading-anchor" href="#Reward-1">Reward</a><a class="docs-heading-anchor-permalink" href="#Reward-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.rewardspace" href="#LyceumBase.rewardspace"><code>LyceumBase.rewardspace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">rewardspace(env::AbstractEnvironment) --&gt; Shapes.AbstractShape</code></pre><p>Returns a subtype of <code>Shapes.AbstractShape</code> describing the reward space of <code>env</code>. Defaults to <code>Shapes.ScalarShape{Float64}()</code>.</p><p>See also: <a href="#LyceumBase.getreward"><code>getreward</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Currently, only scalar spaces are supported (e.g. <code>Shapes.ScalarShape</code>).</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.getreward" href="#LyceumBase.getreward"><code>LyceumBase.getreward</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getreward(state, action, observation, env::AbstractEnvironment)</code></pre><p>Get the current reward of <code>env</code> as a function of <code>state</code>, <code>action</code>, and <code>observation</code>. The returned value will be an object conforming to the reward space returned by <code>rewardspace(env)</code>.</p><p>See also: <a href="#LyceumBase.rewardspace"><code>rewardspace</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Currently, only scalar rewards are supported, so there is no in-place <code>getreward!</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should be careful to ensure that the result of <code>getreward</code> is purely a function of <code>state</code>/<code>action</code>/<code>observation</code> and not any internal, dynamic state contained in <code>env</code>.</p></div></div></div></section><section><div><pre><code class="language-none">getreward(env::AbstractEnvironment)</code></pre><p>Get the current reward of <code>env</code>.</p><p>Internally calls <code>getreward(getstate(env), getaction(env), getobs(env), env)</code>.</p><p>See also: <a href="#LyceumBase.rewardspace"><code>rewardspace</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <code>getreward(state, action, observation, env)</code>.</p></div></div></div></section></article><h3 id="Evaluation-1"><a class="docs-heading-anchor" href="#Evaluation-1">Evaluation</a><a class="docs-heading-anchor-permalink" href="#Evaluation-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.evalspace" href="#LyceumBase.evalspace"><code>LyceumBase.evalspace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">evalspace(env::AbstractEnvironment) --&gt; Shapes.AbstractShape</code></pre><p>Returns a subtype of <code>Shapes.AbstractShape</code> describing the evaluation space of <code>env</code>. Defaults to <code>Shapes.ScalarShape{Float64}()</code>.</p><p>See also: <a href="#LyceumBase.geteval"><code>geteval</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Currently, only scalar evaluation spaces are supported (e.g. <code>Shapes.ScalarShape</code>).</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.geteval" href="#LyceumBase.geteval"><code>LyceumBase.geteval</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">geteval(state, action, observation, env::AbstractEnvironment)</code></pre><p>Get the current evaluation metric of <code>env</code> as a function of <code>state</code>, <code>action</code>, and <code>observation</code>. The returned value will be an object conforming to the evaluation space returned by <code>evalspace(env)</code>.</p><p>Often times reward functions are heavily &quot;shaped&quot; and hard to interpret. For example, the reward function for bipedal walking may include root pose, ZMP terms, control costs, etc., while success can instead be simply evaluated by distance of the root along an axis. The evaluation metric serves to fill this gap.</p><p>The default behavior is to return <code>getreward(state, action, observation, env::AbstractEnvironment)</code>.</p><p>See also: <a href="#LyceumBase.evalspace"><code>evalspace</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Currently, only scalar evaluation metrics are supported, so there is no in-place <code>geteval!</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should be careful to ensure that the result of <code>geteval</code> is purely a function of <code>state</code>/<code>action</code>/<code>observation</code> and not any internal, dynamic state contained in <code>env</code>.</p></div></div></div></section><section><div><pre><code class="language-none">geteval(env::AbstractEnvironment)</code></pre><p>Get the current evaluation metric of <code>env</code>.</p><p>Internally calls <code>geteval(getstate(env), getaction(env), getobs(env), env)</code>.</p><p>See also: <a href="#LyceumBase.evalspace"><code>evalspace</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <code>geteval(state, action, obs, env)</code>.</p></div></div></div></section></article><h3 id="Simulation-1"><a class="docs-heading-anchor" href="#Simulation-1">Simulation</a><a class="docs-heading-anchor-permalink" href="#Simulation-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.reset!" href="#LyceumBase.reset!"><code>LyceumBase.reset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">reset!(m::LyceumAI.MPPI) -&gt; LyceumAI.MPPI
</code></pre><p>Resets the canonical control vector to zeros.</p></div></section><section><div><pre><code class="language-none">reset!(env::AbstractEnvironment)</code></pre><p>Reset <code>env</code> to a fixed, initial state with zero/passive controls.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.randreset!" href="#LyceumBase.randreset!"><code>LyceumBase.randreset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">randreset!([rng::Random.AbstractRNG, ], env::AbstractEnvironment)</code></pre><p>Reset <code>env</code> to a random state with zero/passive controls.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement randreset!(rng, env).</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.step!" href="#LyceumBase.step!"><code>LyceumBase.step!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">step!(sim::MJSim) -&gt; MJSim
step!(sim::MJSim, skip::Integer) -&gt; MJSim
</code></pre><p>Step the simulation by <code>skip</code> steps, where <code>skip</code> defaults to <code>sim.skip</code>.</p><p>State-dependent controls (e.g. the <code>ctrl</code>, <code>xfrc_applied</code>, <code>qfrc_applied</code> fields of <code>sim.d</code>) should be set before calling <code>step!</code>.</p></div></section><section><div><pre><code class="language-none">step!(env::AbstractEnvironment)</code></pre><p>Advance <code>env</code> forward by one timestep.</p><p>See also: <a href="#LyceumBase.timestep"><code>timestep</code></a>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.isdone" href="#LyceumBase.isdone"><code>LyceumBase.isdone</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isdone(state, action, observation, env::AbstractEnvironment) --&gt; Bool</code></pre><p>Returns <code>true</code> if <code>state</code>, <code>action</code>, and <code>observation</code> meet an early termination condition for <code>env</code>. Defaults to <code>false</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should be careful to ensure that the result of <code>isdone</code> is purely a function of <code>state</code>/<code>action</code>/<code>observation</code> and not any internal, dynamic state contained in <code>env</code>.</p></div></div></div></section><section><div><pre><code class="language-none">isdone(env::AbstractEnvironment)</code></pre><p>Returns <code>true</code> if <code>env</code> has met an early termination condition.</p><p>Internally calls <code>isdone(getstate(env), getaction(env), getobs(env), env)</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Implementers of custom <code>AbstractEnvironment</code> subtypes should implement <code>isdone(state, action, obs, env)</code>.</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-binding" id="LyceumBase.timestep" href="#LyceumBase.timestep"><code>LyceumBase.timestep</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">timestep(sim::MJSim) -&gt; Float64
</code></pre><p>Return the effective timestep of <code>sim</code>. Equivalent to <code>sim.skip * sim.m.opt.timestep</code>.</p></div></section><section><div><pre><code class="language-none">timestep(env::AbstractEnvironment)</code></pre><p>Return the internal simulation timestep, in seconds, of <code>env</code>.</p><p>See also: <a href="#Base.Libc.time"><code>Base.time</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">env = FooEnv()
reset!(env)
t1 = time(env)
step!(env)
t2 = time(env)
@assert timestep(env) == (t2 - t1)</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.Libc.time" href="#Base.Libc.time"><code>Base.Libc.time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">time(sim::MJSim) -&gt; Float64
</code></pre><p>Return the current simulation time, in seconds, of <code>sim</code>. Equivalent to sim.d.time.</p></div></section><section><div><pre><code class="language-none">Base.time(env::AbstractEnvironment)</code></pre><p>Returns the current simulation time, in seconds, of <code>env</code>. By convention, <code>time(env)</code> should return zero after a call to <code>reset!(env)</code> or <code>randreset!(env)</code>.</p><p>See also: <a href="#LyceumBase.timestep"><code>timestep</code></a>.</p></div></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../../examples/example_howto/">Running Examples Locally »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 6 February 2020 00:43">Thursday 6 February 2020</span>. Using Julia version 1.3.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
